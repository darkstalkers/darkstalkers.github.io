{"version":3,"sources":["entry.js"],"names":["$","REGIONS","ENV","arcade","ps3","xbox","CHARACTERS","id","name","image","charas","i","len","length","chara","count","optionsHTML","character","$options","each","select","append","clone","regionOptionsHTML","region","$regionOptions","on","prop","changeForm","lastModifyEntryKey","database","firebase","ref","teamsRef","child","singlesRef","entries","configRef","config","once","snapshot","val","open","adminPass","set","configUpdated","show","hide","teamNo","teams","team","key","no","tmpl","toTemplateFormat","fadeIn","prependTo","addOption","push","teamUpdated","singles","single","members","singleUpdated","remove","removeOption","splice","old","replaceWith","changeOptionLabel","e","preventDefault","collapse","enableActionButtons","hideMessages","isMediation","validate","data","getFormData","dataRef","onComplete","trigger","showMessage","setTimeout","modal","showMessage2","password","md5","entry","setFormData","text","removeClass","pass","comfirmDelete","href","replace","scrollTo","type","enabled","isEdit","num","updatedAt","Date","toString","twitter","comment","env","history","after","matching","console","log","selector","label","value","reverse","prepend","find","option","message","fadeOut","empty","className","addClass","handle","div","span","button","cancel","adjust","animate","scrollTop","eq","offset","top","document","hasClass","focus","style","cssText","reset","urlReplace","attr","pushState","location","hash","back","updateTotalCount","getDateString","analytics","upCountTask","totalCount","forEach","member","clearTimeout","afterCount","click","clearFormPlayer","selectedIndex","task","pCharas","extend","pCharasArray","sortByCount","objectToArray","displayCharaCount","regionCount","parseInt","regionData","undefined","sort","a","b","appendTo","object","array","selecter","totalSelecter","date","getFullYear","padLeft","getMonth","getDate","getHours","getMinutes","getSeconds","str","pad","buf","slice","charaBlank","charaName","charaIcon"],"mappings":"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","file":"entry.js","sourcesContent":["$(function(){\n  var REGIONS = ['北海道','青森県','岩手県','宮城県','秋田県',\n  '山形県','福島県','茨城県','栃木県','群馬県','埼玉県','千葉県',\n  '東京都','神奈川県','新潟県','富山県','石川県','福井県','山梨県',\n  '長野県','岐阜県','静岡県','愛知県','三重県','滋賀県','京都府',\n  '大阪府','兵庫県','奈良県','和歌山県','鳥取県','島根県','岡山県',\n  '広島県','山口県','徳島県','香川県','愛媛県','高知県','福岡県',\n  '佐賀県','長崎県','熊本県','大分県','宮崎県','鹿児島県','沖縄県'\n  ];\n  var ENV = {\n    arcade: 'アーケード',\n    ps3: 'PS3',\n    xbox: 'Xbox'\n  }\n\n  var CHARACTERS = [\n    {\n      id: 'anakaris',\n      name: 'アナカリス',\n      image: 'img_s_anakaris_50x50.jpg'\n    }, {\n      id: 'aulbath',\n      name: 'オルバス',\n      image: 'img_s_aulbath_50x50.jpg'\n    }, {\n      id: 'bishamon',\n      name: 'ビシャモン',\n      image: 'img_s_bishamon_50x50.jpg'\n    }, {\n      id: 'bulleta',\n      name: 'バレッタ',\n      image: 'img_s_bulleta_50x50.jpg'\n    }, {\n      id: 'demitri',\n      name: 'デミトリ',\n      image: 'img_s_demitri_50x50.jpg'\n    }, {\n      id: 'felicia',\n      name: 'フェリシア',\n      image: 'img_s_felicia_50x50.jpg'\n    }, {\n      id: 'gallon',\n      name: 'ガロン',\n      image: 'img_s_gallon_50x50.jpg'\n    }, {\n      id: 'jedah',\n      name: 'ジェダ',\n      image: 'img_s_jedah_50x50.jpg'\n    }, {\n      id: 'leilei',\n      name: 'レイレイ',\n      image: 'img_s_leilei_50x50.jpg'\n    }, {\n      id: 'lilith',\n      name: 'リリス',\n      image: 'img_s_lilith_50x50.jpg'\n    }, {\n      id: 'morrigan',\n      name: 'モリガン',\n      image: 'img_s_morrigan_50x50.jpg'\n    }, {\n      id: 'qbee',\n      name: 'キュービー',\n      image: 'img_s_qbee_50x50.jpg'\n    }, {\n      id: 'sasquatch',\n      name: 'サスカッチ',\n      image: 'img_s_sasquatch_50x50.jpg'\n    }, {\n      id: 'victor',\n      name: 'ビクトル',\n      image: 'img_s_victor_50x50.jpg'\n    }, {\n      id: 'zabel',\n      name: 'ザベル',\n      image: 'img_s_zabel_50x50.jpg'\n    }\n  ];\n\n  // ハッシュ作成\n  var charas = {}\n  for (var i = 0, len = CHARACTERS.length; i < len; i++) {\n    var chara = CHARACTERS[i];\n    charas[chara.id] = {\n      name: chara.name,\n      image: chara.image,\n      count: 0\n    };\n  }\n\n  // 使用キャラ選択の作成\n  var optionsHTML = '';\n  for (var i = 0, len = CHARACTERS.length; i < len; i++) {\n    var character = CHARACTERS[i];\n    optionsHTML +=\n      '<option value=\"' + character.id + '\">' + character.name + '</option>';\n  }\n  var $options = $(optionsHTML);\n  $('select.characters').each(function(i, select) {\n    $(select).append($options.clone());\n  });\n\n  // 都道府県選択の作成\n  var regionOptionsHTML = '';\n  for (var i = 0, len = REGIONS.length; i < len; i++) {\n    var region = REGIONS[i];\n    regionOptionsHTML +=\n      '<option value=\"' + (i+1) + '\">' + region + '</option>';\n  }\n  var $regionOptions = $(regionOptionsHTML);\n  $('select.regions').each(function(i, select) {\n    $(select).append($regionOptions.clone());\n  });\n\n  // フォーム切替\n  $('input[name=entry-type]').on('change', function() {\n    if ($('#type-single').prop('checked')) {\n      changeForm('single');\n    } else {\n      changeForm('team');\n    }\n  });\n\n  var lastModifyEntryKey = '';\n\n  // firebase\n  var database = firebase.database();\n  var ref = database.ref('06/data');\n  var teamsRef = ref.child('teams');\n  var singlesRef = ref.child('singles');\n  var entries = {};\n\n  // 設定\n  var configRef = ref.child('config');\n  var config;\n  configRef.child('open');\n  configRef.once('value', function(snapshot) {\n    config = snapshot.val();\n    if (!config) {\n      config = {\n        open: true,\n        adminPass: 'e421b0ade1927b91fa41bfa2baf72eb5'\n      }\n      configRef.set(config);\n    }\n    configUpdated(config);\n    configRef.on('value', function(snapshot) {\n      config = snapshot.val();\n      configUpdated(config);\n    });\n  });\n\n  function configUpdated(config) {\n    if (config.open) {\n      $('.entry-action').show();\n    } else {\n      $('.entry-action').hide();\n    }\n  }\n\n  // 追加\n  var teamNo = 0;\n  var teams = [];\n  teamsRef.on('child_added', function(snapshot) {\n    var team = snapshot.val();\n    var key = snapshot.key;\n    team.no = ++teamNo;\n    team.key = key;\n    $('#template-team').tmpl(toTemplateFormat(team, 3)).fadeIn(1000).prependTo('#teams');\n\n    entries[key] = team;\n    addOption('#target-team', team.name, key, true);\n    teams.push(team);\n    teamUpdated(team);\n  });\n  var singles = [];\n  singlesRef.on('child_added', function(snapshot) {\n    var single = snapshot.val();\n    var key = snapshot.key;\n    single.key = key;\n    $('#template-single').tmpl(toTemplateFormat(single, 1)).fadeIn(1000).prependTo('#singles');\n    entries[key] = single;\n    addOption('#target-single', single.members[0].name, key, true);\n    singles.push(single);\n    singleUpdated(single);\n  });\n\n  // 削除\n  teamsRef.on('child_removed', function(snapshot) {\n    var key = snapshot.key;\n    $('#' + key).remove();\n    removeOption('#target-team', key);\n    delete entries[key];\n    for (var i = 0, len = teams.length; i < len; i++) {\n      if (teams[i].key === key) {\n        teams.splice(i, 1);\n        break;\n      }\n    }\n    teamUpdated();\n  });\n  singlesRef.on('child_removed', function(snapshot) {\n    var key = snapshot.key;\n    $('#' + key).remove();\n    removeOption('#target-single', key);\n    delete entries[key];\n    for (var i = 0, len = singles.length; i < len; i++) {\n      if (singles[i].key === key) {\n        singles.splice(i, 1);\n        break;\n      }\n    }\n    singleUpdated();\n  });\n\n  // 変更\n  teamsRef.on('child_changed', function(snapshot, old) {\n    var team = snapshot.val();\n    var key = snapshot.key;\n    team.no = entries[key].no;\n    team.key = key;\n\n    $('#' + key).replaceWith($('#template-team').tmpl(toTemplateFormat(team, 3)).fadeIn(1000));\n\n    entries[key] = team;\n    changeOptionLabel('#target-team', team.name, key);\n    for (var i = 0, len = teams.length; i < len; i++) {\n      if (teams[i].key === key) {\n        teams[i] = team;\n        break;\n      }\n    }\n    teamUpdated(team);\n  });\n  singlesRef.on('child_changed', function(snapshot, old) {\n    var single = snapshot.val();\n    var key = snapshot.key;\n    single.key = key;\n    $('#' + key).replaceWith($('#template-single').tmpl(toTemplateFormat(single, 1)).fadeIn(1000));\n    entries[key] = single;\n    changeOptionLabel('#target-single', single.members[0].name, key);\n    for (var i = 0, len = singles.length; i < len; i++) {\n      if (singles[i].key === key) {\n        singles[i] = single;\n        break;\n      }\n    }\n    singleUpdated(single);\n  });\n\n\n  // エントリー（保存）\n  $('#entry-button').on('click', function(e) {\n    e.preventDefault();\n    $('#edit-form').collapse('hide');\n    enableActionButtons(false);\n    hideMessages();\n\n    // validate\n    var isMediation = $('#type-single').prop('checked');\n    if (!validate(isMediation)) {\n      enableActionButtons(true);\n      return false;\n    }\n    var data = getFormData();\n    var dataRef;\n    if (isMediation) {\n      dataRef = singlesRef.push(data, onComplete);\n    } else {\n      dataRef = teamsRef.push(data, onComplete);\n    }\n\n    function onComplete() {\n      $('#type-team').trigger('change');\n      showMessage('success', 'エントリーが完了しました', true);\n      $('.team-entry-form > .form-group').hide();\n      setTimeout(function(){\n        $('#team-entry').modal('hide');\n      }, 1500);\n      lastModifyEntryKey = dataRef.key;\n    }\n  });\n\n  // 編集・削除の入力\n  $('#input-button').on('click', function(e){\n    e.preventDefault();\n    hideMessages();\n\n    if ($('#target').prop('selectedIndex') === 0) {\n      showMessage2('danger', '対象のエントリーを選択してください');\n      return false;\n    }\n    if ($('#input-pass').val().length === 0) {\n      showMessage2('danger', 'パスワードを入力してください');\n      return false;\n    }\n\n    var key = $('#target').val();\n    var password = md5($('#input-pass').val());\n    var entry = entries[key];\n    if (entry.password === password || config.adminPass === password) {\n      // エントリー情報セット\n      setFormData(entry, key);\n      $('#message').hide();\n      $('#entry-button').hide();\n      $('#edit-button').show();\n      $('#delete-button').show();\n      $('#entry-form-title').text('エントリーの編集・削除');\n      $('.entry-explain').hide();\n      $('.pass .badge').hide();\n      $('#pass').removeClass('require').prop('placeholder', 'パスワードを変更する');\n      $('#team-entry').removeClass('edit');\n      hideMessages();\n    } else {\n      showMessage2('danger', 'パスワードが違います');\n      return false;\n    }\n  });\n\n  // 編集する\n  $('#edit-button').on('click', function(e) {\n    e.preventDefault();\n\n    enableActionButtons(false);\n    hideMessages();\n\n    // validate\n    var key = $('#key').val();\n    if (key.length === 0) {\n      showMessage('danger', 'エラーが発生しました。もう一度最初からやり直してください');\n      enableActionButtons(true);\n      return false;\n    }\n    var isMediation = $('#type-single').prop('checked');\n    if (!validate(isMediation, true)) {\n      enableActionButtons(true);\n      return false;\n    }\n\n\n    var data = getFormData();\n    var dataRef;\n\n    // パスワードの入力がなければ旧パスワードのまま\n    var pass = $('#pass').val();\n    if (pass.length !== 0) {\n      data.password = md5(pass);\n    } else {\n      data.password = entries[key].password;\n    }\n    var dataRef;\n    if (!entries[key].name && !isMediation) {\n      // 斡旋からチームエントリー\n      dataRef = singlesRef.child(key);\n      dataRef.set(null);\n      dataRef = teamsRef.push(data, onComplete);\n    } else if (entries[key].name && isMediation) {\n      // チームエントリーから斡旋\n      dataRef = teamsRef.child(key);\n      dataRef.set(null);\n      dataRef = singlesRef.push(data, onComplete);\n    } else if (isMediation) {\n      // 斡旋から斡旋\n      dataRef = singlesRef.child(key);\n      dataRef.set(data, onComplete);\n    } else {\n      // チームエントリーからチームエントリー\n      dataRef = teamsRef.child(key);\n      dataRef.set(data, onComplete);\n    }\n    function onComplete() {\n      showMessage('success', '編集が完了しました', true);\n      $('.team-entry-form > .form-group').hide();\n      setTimeout(function(){\n        $('#team-entry').modal('hide');\n      }, 1500);\n      lastModifyEntryKey = dataRef.key;\n    }\n  });\n\n  // 削除する\n  $('#delete-button').on('click', function(e) {\n    e.preventDefault();\n\n    enableActionButtons(false);\n    // validate\n    var key = $('#key').val();\n    if (key.length === 0) {\n      showMessage('danger', 'エラーが発生しました。もう一度最初からやり直してください');\n      enableActionButtons(true);\n      return false;\n    }\n    comfirmDelete(function(e){\n      e.preventDefault();\n      var isMediation = $('#type-single').prop('checked');\n      var dataRef;\n      if (isMediation) {\n        dataRef = singlesRef.child(key);\n        dataRef.set(null, onComplete);\n      } else {\n        dataRef = teamsRef.child(key);\n        dataRef.set(null, onComplete);\n      }\n    });\n\n    function onComplete() {\n      showMessage('success', '削除が完了しました', true);\n      $('.team-entry-form > .form-group').hide();\n      setTimeout(function(){\n        $('#team-entry').modal('hide');\n      }, 1500);\n    }\n  });\n\n  // スムーズスクロール\n  $('.anchor-button').on('click', function(e) {\n    e.preventDefault();\n    var href = '#' + this.href.replace(/.*#/, '');\n    scrollTo(href, -70);\n  });\n\n  function hideMessages() {\n    $('#message').hide();\n    $('#message2').hide();\n  }\n\n  function changeForm(type) {\n    if (type === 'single') {\n      $('#member1').show();\n      $('#member1 > legend').hide();\n      $('#member2').hide();\n      $('#member3').hide();\n      $('#team-name').hide();\n      $('.pass').show();\n    } else {\n      $('#member1').show();\n      $('#member1 > legend').show();\n      $('#member2').show();\n      $('#member3').show();\n      $('#team-name').show();\n      $('.pass').show();\n    }\n  }\n\n  function enableActionButtons(enabled) {\n    $('#entry-button').prop('disabled', !enabled);\n    $('#edit-button').prop('disabled', !enabled);\n    $('#delete-button').prop('disabled', !enabled);\n    $('#cancel-button').prop('disabled', !enabled);\n  }\n\n  function validate(isMediation, isEdit) {\n    if (typeof isEdit == 'undefined') {\n      isEdit = false\n    }\n    if (!isMediation) {\n      if ($('#teamName').val().length === 0) {\n        showMessage('danger', 'チーム名を入力してください');\n        return false;\n      }\n    }\n    if ($('#member1-name').val().length === 0) {\n      showMessage('danger', '1人目のプレイヤー名を入力してください');\n      return false;\n    }\n    if ($('#member1-character').prop('selectedIndex') === 0) {\n      showMessage('danger', '1人目の使用キャラを選択してください');\n      return false;\n    }\n    if (!isMediation) {\n      for (let i = 1; i < 3; i++) {\n        let num = i + 1;\n          if ( $(`#member${num}-name`).val() ||\n            $(`#member${num}-character`).prop('selectedIndex') !== 0 ||\n            $(`#member${num}-comment`).val() ||\n            $(`#member${num}-region`).prop('selectedIndex') !== 0 ||\n            $(`#member${num}-env`).prop('selectedIndex') !== 0 ||\n            $(`#member${num}-history`).val() ||\n            $(`#member${num}-join-ok`).prop('checked') ||\n            $(`#member${num}-join-ng`).prop('checked')\n          ) {\n            if ($(`#member${num}-name`).val().length === 0) {\n              showMessage('danger', `${num}人目のプレイヤー名を入力してください`);\n              return false;\n            }\n            if ($(`#member${num}-character`).prop('selectedIndex') === 0) {\n              showMessage('danger', `${num}人目の使用キャラを選択してください`);\n              return false;\n            }\n          }\n      }\n    }\n    // if (!isMediation) {\n    //   if ($('#member2-name').val().length === 0) {\n    //     showMessage('danger', '2人目のプレイヤー名を入力してください');\n    //     return false;\n    //   }\n    //   if ($('#member2-character').prop('selectedIndex') === 0) {\n    //     showMessage('danger', '2人目の使用キャラを選択してください');\n    //     return false;\n    //   }\n    //   if ($('#member3-name').val().length === 0) {\n    //     showMessage('danger', '3人目のプレイヤー名を入力してください');\n    //     return false;\n    //   }\n    //   if ($('#member3-character').prop('selectedIndex') === 0) {\n    //     showMessage('danger', '3人目の使用キャラを選択してください');\n    //     return false;\n    //   }\n    // }\n    if (!isEdit && $('#pass').val().length === 0) {\n      showMessage('danger', '削除・編集用のパスワードを入力してください');\n      return false;\n    }\n    return true;\n  }\n\n  function getFormData() {\n    // must inputs\n    var data = {\n      updatedAt: new Date().toString(),\n      password: md5($('#pass').val()),\n      members: []\n    }\n\n    for (let i = 0; i < 3; i++) {\n      let num = i + 1;\n      if ($(`#member${num}-name`).val()) {\n        data.members.push({\n          name: $(`#member${num}-name`).val(),\n          character: $(`#member${num}-character`).val(),\n          twitter: $(`#member${num}-twitter`).val(),\n          comment: $(`#member${num}-comment`).val().replace(/[\\n\\r]/g, ''),\n          region: $(`#member${num}-region`).val(),\n          env: $(`#member${num}-env`).val() || '',\n          history: $(`#member${num}-history`).val() || '',\n          after: $(`input[name=member${num}-after]:checked`).val() || ''\n        });\n      }\n    }\n\n    if ($('#type-team').prop('checked')) {\n      // チーム名\n      data.name = $('#teamName').val();\n    }\n    data.matching = $(`input[name=matching]:checked`).val() || ''\n    return data;\n  }\n\n  function setFormData(entry, key) {\n    $('#key').val(key || '');\n\n    console.log('debug', entry);\n    for (let i = 0; i < entry.members.length; i++) {\n      let num = i + 1;\n      $(`#member${num}-name`).val(entry.members[i].name);\n      $(`#member${num}-character`).val(entry.members[i].character || '選択してください');\n      $(`#member${num}-twitter`).val(entry.members[i].twitter);\n      $(`#member${num}-comment`).val(entry.members[i].comment);\n      $(`#member${num}-region`).val(entry.members[i].region || '選択してください');\n      $(`#member${num}-env`).val(entry.members[i].env || '選択してください');\n      $(`#member${num}-history`).val(entry.members[i].history);\n      let after = entry.members[i].after;\n      if (after) {\n        if (after == 1) {\n          $(`#member${num}-join-ok`).prop('checked', true);\n        } else {\n          $(`#member${num}-join-ng`).prop('checked', true);\n        }\n      }\n    }\n\n    if (entry.name && entry.name.length !== 0) {\n      $('#type-team').prop('checked', true).trigger('change');\n      $('#teamName').val(entry.name);\n    } else {\n      $('#type-single').prop('checked', true).trigger('change');\n    }\n    let matching = entry.matching;\n    if (matching) {\n      if (matching == 1) {\n        $(`#matching-ok`).prop('checked', true);\n      } else {\n        $(`#matching-ng`).prop('checked', true);\n      }\n    }\n  }\n\n  function addOption(selector, label, value, reverse) {\n    if (reverse) {\n      $(selector).prepend($('<option/>').text(label).val(value));\n    } else {\n      $(selector).append($('<option/>').text(label).val(value));\n    }\n  }\n\n  function removeOption(selector, value) {\n    $(selector).find('option').each(function(i, option) {\n      if (option.value === value) {\n        $(option).remove();\n        return;\n      }\n    });\n  }\n  function changeOptionLabel(selector, label, value) {\n    $(selector).find('option').each(function(i, option) {\n      if (option.value === value) {\n        $(option).text(label);\n        return;\n      }\n    });\n  }\n\n  function showMessage(type, message, fadeOut) {\n    $('#message').empty();\n    // if (typeof fadeOut === 'undefined') {\n    //   fadeOut = false;\n    // }\n    $('#message')[0].className = '';\n    $('#message').text(message).addClass('alert alert-' + type).show();\n    // if (fadeOut) {\n    //   setTimeout(function(){\n    //     $('#message').fadeOut(1000);\n    //   }, 3000);\n    // }\n  }\n\n  function showMessage2(type, message, fadeOut) {\n    $('#message2').empty();\n    // if (typeof fadeOut === 'undefined') {\n    //   fadeOut = false;\n    // }\n    $('#message2')[0].className = '';\n    $('#message2').text(message).addClass('alert alert-' + type).show();\n    // if (fadeOut) {\n    //   setTimeout(function(){\n    //     $('#message2').fadeOut(1000);\n    //   }, 3000);\n    // }\n  }\n\n  function comfirmDelete(handle) {\n    $('#message').empty();\n    var div = $('<div/>');\n    var span = $('<span/>').text('エントリーを削除します。よろしいですか？');\n    var button = $('<a href=\"#\"/>').addClass('btn btn-danger btn-sm').text('はい').on('click', handle);\n    var cancel = $('<a href=\"#\"/>').addClass('btn btn-default btn-sm').text('いいえ').on('click', function(e){\n      e.preventDefault();\n      $('#message').hide();\n    });\n    div.append(span);\n    div.append(button);\n    div.append(cancel);\n    $('#message')[0].className = '';\n    $('#message').append(div).addClass('alert alert-danger').show();\n  }\n\n  function scrollTo(selector, adjust) {\n    $(\"html,body\").animate({scrollTop:$(selector).eq(0).offset().top + adjust});\n  }\n\n  $('.to-edit-form').on('click', function(e) {\n    e.preventDefault();\n    $('#team-entry').addClass('edit').modal();\n  });\n  $('.to-entry-form').on('click', function(e) {\n    e.preventDefault();\n    $('#team-entry').removeClass('edit').modal();\n  });\n  $(document).on('click', '.edit-link', function(e) {\n    e.preventDefault();\n    $('#target').val($(this).data('id'));\n    $('#team-entry').addClass('edit').modal();\n  });\n  $('#team-entry').on('shown.bs.modal', function (e) {\n    if ($('#team-entry').hasClass('edit')) {\n      if ($('#target').prop('selectedIndex') !== 0) {\n        $('#input-pass').focus();\n      } else {\n        $('#target').focus();\n      }\n    }\n  });\n  $('#team-entry').on('hidden.bs.modal', function(e) {\n    $('#entry-form-title').text('エントリー');\n    $('#entry-button')[0].style.cssText = '';\n    $('.entry-explain')[0].style.cssText = '';\n    $('#edit-button')[0].style.cssText = '';\n    $('#delete-button')[0].style.cssText = '';\n    $('.pass .badge')[0].style.cssText = '';\n    $('#pass').addClass('require').prop('placeholder', '');\n    $('.team-entry-form')[0].reset();\n    $('.team-entry-form > .form-group')[0].style.cssText = '';  // 種別\n    $('.team-entry-form > .form-group')[1].style.cssText = '';  // 斡旋希望\n    $('.edit-form')[0].reset();\n    changeForm();\n    enableActionButtons(true);\n    hideMessages();\n\n    if (lastModifyEntryKey) {\n      var selector = '#' + lastModifyEntryKey;\n      scrollTo(selector, -100);\n      $(selector).addClass('done');\n      setTimeout(function() {\n        $(selector).addClass('animate');\n      }, 100);\n      lastModifyEntryKey = '';\n    }\n  });\n  $('.change-edit-form').on('click', function(e) {\n    e.preventDefault();\n    $('#team-entry').addClass('edit');\n    hideMessages();\n  });\n\n  // modalが表示された時\n  $(\".modal\").on(\"shown.bs.modal\", function() {\n    var urlReplace = \"#\" + $(this).attr('id')\n    history.pushState(null, null, urlReplace)\n  });\n\n  // modalの閉じる機能が動作した時\n  $(\".modal\").on(\"hidden.bs.modal\", function () {\n    if(location.hash == \"#\" + $(this).attr('id')) {\n      history.back()\n    }\n  });\n\n  function teamUpdated(team) {\n    $('.team-entry-count').text(teams.length);\n    updateTotalCount();\n    if (team) {\n      if (team.updatedAt) {\n        $('.team-last-updated-at').text(getDateString(team.updatedAt));\n      }\n    } else {\n      $('.team-last-updated-at').text(getDateString());\n    }\n    analytics();\n  }\n  function singleUpdated(single) {\n    $('.single-entry-count').text(singles.length);\n    updateTotalCount();\n    if (single) {\n      if (single.updatedAt) {\n        $('.single-last-updated-at').text(getDateString(single.updatedAt));\n      }\n    } else {\n      $('.single-last-updated-at').text(getDateString());\n    }\n    analytics();\n  }\n  var upCountTask;\n  function updateTotalCount() {\n    let totalCount = 0;\n    teams.forEach(team => {\n      team.members.forEach(member => {\n        if (member.name) {\n          totalCount++;\n        }\n      });\n    });\n    singles.forEach(team => {\n      team.members.forEach(member => {\n        if (member.name) {\n          totalCount++;\n        }\n      });\n    });\n    $('.total-count').text(totalCount);\n\n    if (upCountTask) {\n      clearTimeout(upCountTask);\n    }\n    upCountTask = setTimeout(function() {\n      var afterCount = 0;\n      for (var key in entries) {\n        var entry = entries[key];\n        for (var i = 0, len = entry.members.length; i < len; i++) {\n          var member = entry.members[i];\n          if (member.after == 1) {\n            afterCount++;\n          }\n        }\n      }\n      $('.after-count').text(afterCount);\n    }, 1000);\n  }\n\n  $('#clear-btn-2').click(function(e) {\n    e.preventDefault();\n    clearFormPlayer(2);\n  });\n  $('#clear-btn-3').click(function(e) {\n    e.preventDefault();\n    clearFormPlayer(3);\n  })\n\n  function clearFormPlayer(num) {\n    if (!num) {\n      return;\n    }\n    $('#member' + num + '-name').val('');\n    $('#member' + num + '-character')[0].selectedIndex = 0;\n    $('#member' + num + '-comment').val('');\n    $('#member' + num + '-region')[0].selectedIndex = 0;\n    $('#member' + num + '-env')[0].selectedIndex = 0;\n    $('#member' + num + '-history').val('');\n    $('#member' + num + '-join-ok').prop('checked', false);\n    $('#member' + num + '-join-ng').prop('checked', false);\n  }\n\n  var task;\n  function analytics() {\n    if (task) {\n      clearTimeout(task);\n    }\n    task = setTimeout(function() {\n      var pCharas = $.extend(true, {}, charas);\n      for (var key in entries) {\n        var entry = entries[key];\n        for (var i = 0, len = entry.members.length; i < len; i++) {\n          if (pCharas[entry.members[i].character]) {\n            pCharas[entry.members[i].character].count++;\n          }\n        }\n      }\n      var pCharasArray = sortByCount(objectToArray(pCharas));\n      displayCharaCount(pCharasArray, '#character-count');\n\n      // 都道府県別集計\n      var regionCount = [];\n      for (var key in entries) {\n        var entry = entries[key];\n        for (var i = 0, len = entry.members.length; i < len; i++) {\n          if (entry.members[i].region !== '選択してください') {\n            var region = parseInt(entry.members[i].region, 10);\n            if (!regionCount[region]) {\n              regionCount[region] = 0;\n            }\n            regionCount[region]++;\n          }\n        }\n      }\n\n      var regionData = [];\n      for (var i = 0, len = regionCount.length; i < len; i++) {\n        if (regionCount[i] !== undefined) {\n          regionData.push({\n            name: REGIONS[i-1],\n            count: regionCount[i]\n          });\n        }\n      }\n      regionData.sort(function(a,b){\n        if(a.count < b.count) return 1;\n        if(a.count > b.count) return -1;\n        return 0;\n      });\n\n      $('#region-count').empty();\n      for (var i = 0, len = regionData.length; i < len; i++) {\n        $('#template-region-count').tmpl(regionData[i]).appendTo('#region-count');\n      }\n\n    }, 1000);\n  }\n  function objectToArray(object) {\n    var array = [];\n    for (var key in object) {\n      array.push(object[key]);\n    }\n    return array;\n  }\n  function sortByCount(array) {\n    return array.sort(function(a,b){\n        if(a.count < b.count) return -1;\n        if(a.count > b.count) return 1;\n        return 0;\n    });\n  }\n  function displayCharaCount(array, selecter, totalSelecter) {\n    $(selecter).empty();\n    var totalCount = 0;\n    for (var i = (array.length-1); i >= 0; i--) {\n      var chara = array[i];\n      $('#character-count-template').tmpl(chara).appendTo(selecter);\n      totalCount += chara.count;\n    }\n    if (totalSelecter) {\n      $(totalSelecter).text(totalCount);\n    }\n  }\n\n  function getDateString(date) {\n    if (date === undefined) {\n      date = new Date();\n    } else if (typeof date === 'string' && date.length !== 0) {\n      date = new Date(date);\n    }\n    if (date) {\n      return date.getFullYear() + '/' +\n             padLeft(date.getMonth() + 1) + '/' +\n             padLeft(date.getDate()) + ' ' +\n             padLeft(date.getHours()) + ':' +\n             padLeft(date.getMinutes()) + ':' +\n             padLeft(date.getSeconds());\n    } else {\n      return '';\n    }\n  }\n  function padLeft(str, len, pad) {\n    if (pad === undefined) {\n      pad = '0';\n    }\n    if (len === undefined) {\n      len = 2;\n    }\n    var buf = ''\n    for (var i = 0; i < len; i++) {\n      buf += pad;\n    }\n    str = pad + str;\n    return str.slice(-len);\n  }\n\n  const charaBlank = {\n    name: '',\n    image: 'blank.png'\n  };\n\n  function toTemplateFormat(data, len) {\n    if (!len) {\n      len = 3;\n    }\n    for (let i = 0; i < len; i++) {\n      let member = data.members[i];\n      if (!member) {\n        member = {};\n      }\n      member.name = member.name || '';\n      member.comment = member.comment || '';\n      let character = charas[member.character];\n      if (!character) {\n        character = charaBlank;\n      }\n      member.charaName = character.name;\n      member.charaIcon = character.image;\n      data.members[i] = member;\n    }\n    return data;\n  }\n\n  analytics();\n});\n\nconsole.log('%c　　　　　　　　　　　　　　　　＼　│　／', 'font-family: ＭＳ Ｐゴシック');\nconsole.log('%c　　　　　　　　　　　　　　　　　／￣＼　　 ／￣￣￣￣￣￣￣￣￣', 'font-family: ＭＳ Ｐゴシック');\nconsole.log('%c　　　　　　　　　　　　　　　─（ ﾟ ∀ ﾟ ）＜　さいたまさいたま！', 'font-family: ＭＳ Ｐゴシック');\nconsole.log('%c　　　　　　　　　　　　　　　　　＼＿／　　 ＼＿＿＿＿＿＿＿＿＿', 'font-family: ＭＳ Ｐゴシック');\nconsole.log('%c　　　　　　　　　　　　　　　　／　│　＼', 'font-family: ＭＳ Ｐゴシック');\nconsole.log('%c　　　　　　　　　　　　　　　　　　　 ∩ ∧　∧　　／￣￣￣￣￣￣￣￣￣￣', 'font-family: ＭＳ Ｐゴシック');\nconsole.log('%c￣￣￣￣￣￣￣￣＼　　∩ ∧　∧　　　　＼（ ﾟ∀ﾟ）＜　さいたまさいたまさいたま！', 'font-family: ＭＳ Ｐゴシック');\nconsole.log('%cさいたま～～～！ 　 ＞（ ﾟ∀ﾟ ）/ 　　　｜　　　/ 　＼＿＿＿＿＿＿＿＿＿＿', 'font-family: ＭＳ Ｐゴシック');\nconsole.log('%c＿＿＿＿＿＿＿＿／ 　｜　　 〈　　　　｜　　｜　', 'font-family: ＭＳ Ｐゴシック');\nconsole.log('%c　　　　　　　　　　 /　／＼_」　　　/　／＼」', 'font-family: ＭＳ Ｐゴシック');\nconsole.log('%c　　　　　　　　　　 ￣　　　　　　 / ／', 'font-family: ＭＳ Ｐゴシック');\nconsole.log('バグを見つけたら @yoshikawa_t まで');\n"]}