{"version":3,"sources":["admin.js"],"names":["$","REGIONS","CHARACTERS","id","name","image","charas","i","len","length","chara","database","firebase","ref","teamsRef","child","singlesRef","configRef","config","once","snapshot","val","open","adminPass","set","configUpdated","on","show","removeClass","addClass","text","hide","e","preventDefault","teams","team","key","push","teamUpdated","singles","single","singleUpdated","splice","old","updatedAt","getDateString","analytics","date","undefined","Date","getFullYear","padLeft","getMonth","getDate","getHours","getMinutes","getSeconds","str","pad","buf","slice","task","clearTimeout","setTimeout","totalCount","afterCount","forEach","members","member","after","objectToArray","object","array","BOM","prop","encodeURIComponent","createTeamsData","EscapeSJIS","createSinglesData","rowHeader","rows","columns","matching","character","comment","parseInt","region","filterDefaultStr","env","history","lines","join","md5"],"mappings":"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","sourcesContent":["$(function(){\n\n  var REGIONS = ['北海道','青森県','岩手県','宮城県','秋田県',\n  '山形県','福島県','茨城県','栃木県','群馬県','埼玉県','千葉県',\n  '東京都','神奈川県','新潟県','富山県','石川県','福井県','山梨県',\n  '長野県','岐阜県','静岡県','愛知県','三重県','滋賀県','京都府',\n  '大阪府','兵庫県','奈良県','和歌山県','鳥取県','島根県','岡山県',\n  '広島県','山口県','徳島県','香川県','愛媛県','高知県','福岡県',\n  '佐賀県','長崎県','熊本県','大分県','宮崎県','鹿児島県','沖縄県'\n  ];\n\n  var CHARACTERS = [\n    {\n      id: 'anakaris',\n      name: 'アナカリス',\n      image: 'img_s_anakaris_50x50.jpg'\n    }, {\n      id: 'aulbath',\n      name: 'オルバス',\n      image: 'img_s_aulbath_50x50.jpg'\n    }, {\n      id: 'bishamon',\n      name: 'ビシャモン',\n      image: 'img_s_bishamon_50x50.jpg'\n    }, {\n      id: 'bulleta',\n      name: 'バレッタ',\n      image: 'img_s_bulleta_50x50.jpg'\n    }, {\n      id: 'demitri',\n      name: 'デミトリ',\n      image: 'img_s_demitri_50x50.jpg'\n    }, {\n      id: 'felicia',\n      name: 'フェリシア',\n      image: 'img_s_felicia_50x50.jpg'\n    }, {\n      id: 'gallon',\n      name: 'ガロン',\n      image: 'img_s_gallon_50x50.jpg'\n    }, {\n      id: 'jedah',\n      name: 'ジェダ',\n      image: 'img_s_jedah_50x50.jpg'\n    }, {\n      id: 'leilei',\n      name: 'レイレイ',\n      image: 'img_s_leilei_50x50.jpg'\n    }, {\n      id: 'lilith',\n      name: 'リリス',\n      image: 'img_s_lilith_50x50.jpg'\n    }, {\n      id: 'morrigan',\n      name: 'モリガン',\n      image: 'img_s_morrigan_50x50.jpg'\n    }, {\n      id: 'qbee',\n      name: 'キュービー',\n      image: 'img_s_qbee_50x50.jpg'\n    }, {\n      id: 'sasquatch',\n      name: 'サスカッチ',\n      image: 'img_s_sasquatch_50x50.jpg'\n    }, {\n      id: 'victor',\n      name: 'ビクトル',\n      image: 'img_s_victor_50x50.jpg'\n    }, {\n      id: 'zabel',\n      name: 'ザベル',\n      image: 'img_s_zabel_50x50.jpg'\n    }\n  ];\n\n  // ハッシュ作成\n  var charas = {}\n  for (var i = 0, len = CHARACTERS.length; i < len; i++) {\n    var chara = CHARACTERS[i];\n    charas[chara.id] = {\n      name: chara.name,\n      image: chara.image\n    };\n  }\n\n  // firebase\n  var database = firebase.database();\n  var ref = database.ref('06/data');\n  var teamsRef = ref.child('teams');\n  var singlesRef = ref.child('singles');\n\n  // 設定\n  var configRef = ref.child('config');\n  var config;\n  configRef.child('open');\n  configRef.once('value', function(snapshot) {\n    config = snapshot.val();\n    if (!config) {\n      config = {\n        open: true,\n        adminPass: 'e421b0ade1927b91fa41bfa2baf72eb5'\n      }\n      configRef.set(config);\n    }\n    configUpdated(config);\n    configRef.on('value', function(snapshot) {\n      config = snapshot.val();\n      configUpdated(config);\n    });\n  });\n\n  function configUpdated(config) {\n    $('.status').show();\n    if (config.open) {\n      $('.status').removeClass('alert-warning').addClass('alert-success');\n      $('.status-text').text('只今エントリー受付中');\n      $('.start').hide();\n      $('.stop').show();\n    } else {\n      $('.status').removeClass('alert-success').addClass('alert-warning');\n      $('.status-text').text('エントリー受付停止中');\n      $('.start').show();\n      $('.stop').hide();\n    }\n  }\n\n  $('.start').on('click', function(e) {\n    e.preventDefault();\n    config.open = true;\n    configRef.set(config);\n  });\n  $('.stop').on('click', function(e) {\n    e.preventDefault();\n    config.open = false;\n    configRef.set(config);\n  });\n\n\n\n  // 追加\n  var teams = [];\n  teamsRef.on('child_added', function(snapshot) {\n    var team = snapshot.val();\n    var key = snapshot.key;\n    team.key = key;\n    teams.push(team);\n    teamUpdated(team);\n  });\n  var singles = [];\n  singlesRef.on('child_added', function(snapshot) {\n    var single = snapshot.val();\n    var key = snapshot.key;\n    single.key = key;\n    singles.push(single);\n    singleUpdated(single);\n  });\n\n  // 削除\n  teamsRef.on('child_removed', function(snapshot) {\n    var key = snapshot.key;\n    for (var i = 0, len = teams.length; i < len; i++) {\n      if (teams[i].key === key) {\n        teams.splice(i, 1);\n        break;\n      }\n    }\n    teamUpdated();\n  });\n  singlesRef.on('child_removed', function(snapshot) {\n    var key = snapshot.key;\n    for (var i = 0, len = singles.length; i < len; i++) {\n      if (singles[i].key === key) {\n        singles.splice(i, 1);\n        break;\n      }\n    }\n    singleUpdated();\n  });\n\n  // 変更\n  teamsRef.on('child_changed', function(snapshot, old) {\n    var team = snapshot.val();\n    var key = snapshot.key;\n    team.key = key;\n    for (var i = 0, len = teams.length; i < len; i++) {\n      if (teams[i].key === key) {\n        teams[i] = team;\n        break;\n      }\n    }\n    teamUpdated(team);\n  });\n  singlesRef.on('child_changed', function(snapshot, old) {\n    var single = snapshot.val();\n    var key = snapshot.key;\n    single.key = key;\n    for (var i = 0, len = singles.length; i < len; i++) {\n      if (singles[i].key === key) {\n        singles[i] = single;\n        break;\n      }\n    }\n    singleUpdated(single);\n  });\n\n  function teamUpdated(team) {\n    $('.team-entry-count').text(teams.length);\n    if (team) {\n      if (team.updatedAt) {\n        $('.team-last-updated-at').text(getDateString(team.updatedAt));\n      }\n    } else {\n      $('.team-last-updated-at').text(getDateString());\n    }\n    analytics();\n  }\n  function singleUpdated(single) {\n    $('.single-entry-count').text(singles.length);\n    if (single) {\n      if (single.updatedAt) {\n        $('.single-last-updated-at').text(getDateString(single.updatedAt));\n      }\n    } else {\n      $('.single-last-updated-at').text(getDateString());\n    }\n    analytics();\n  }\n\n  function getDateString(date) {\n    if (date === undefined) {\n      date = new Date();\n    } else if (typeof date === 'string' && date.length !== 0) {\n      date = new Date(date);\n    }\n    if (date) {\n      return date.getFullYear() + '/' +\n             padLeft(date.getMonth() + 1) + '/' +\n             padLeft(date.getDate()) + ' ' +\n             padLeft(date.getHours()) + ':' +\n             padLeft(date.getMinutes()) + ':' +\n             padLeft(date.getSeconds());\n    } else {\n      return '';\n    }\n  }\n  function padLeft(str, len, pad) {\n    if (pad === undefined) {\n      pad = '0';\n    }\n    if (len === undefined) {\n      len = 2;\n    }\n    var buf = ''\n    for (var i = 0; i < len; i++) {\n      buf += pad;\n    }\n    str = pad + str;\n    return str.slice(-len);\n  }\n\n  var task;\n  function analytics() {\n    if (task) {\n      clearTimeout(task);\n    }\n    task = setTimeout(function() {\n\n      // 総参加者カウント\n      let totalCount = 0;\n      var afterCount = 0;\n      teams.forEach(team => {\n        team.members.forEach(member => {\n          if (member.name) {\n            totalCount++;\n            if (member.after == 1) {\n              afterCount++;\n            }\n          }\n        });\n      });\n      singles.forEach(team => {\n        team.members.forEach(member => {\n          if (member.name) {\n            totalCount++;\n            if (member.after == 1) {\n              afterCount++;\n            }\n          }\n        });\n      });\n      $('.total-count').text(totalCount);\n      $('.after-count').text(afterCount);\n\n    }, 1000);\n  }\n  function objectToArray(object) {\n    var array = [];\n    for (var key in object) {\n      array.push(object[key]);\n    }\n    return array;\n  }\n\n  var BOM = '\\ufeff';\n  $('#teams-output-utf8').on('click', function(e) {\n    $(this).prop('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(BOM + createTeamsData()));\n  });\n  $('#teams-output-sjis').on('click', function(e) {\n    $(this).prop('href', 'data:text/plain;charset=sjis,' + EscapeSJIS(createTeamsData()));\n  });\n  $('#singles-output-utf8').on('click', function(e) {\n    $(this).prop('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(BOM + createSinglesData()));\n  });\n  $('#singles-output-sjis').on('click', function(e) {\n    $(this).prop('href', 'data:text/plain;charset=sjis,' + EscapeSJIS(createSinglesData()));\n  });\n\n  function createTeamsData() {\n    var rowHeader = [\n      'チーム名',\n      '斡旋希望',\n      '1:プレイヤー名',\n      '1:使用キャラ',\n      '1:コメント',\n      '1:主な活動地域',\n      '1:主なプレイ環境',\n      '1:セイヴァー歴',\n      '1:打ち上げ',\n      '2:プレイヤー名',\n      '2:使用キャラ',\n      '2:コメント',\n      '2:主な活動地域',\n      '2:主なプレイ環境',\n      '2:セイヴァー歴',\n      '2:打ち上げ',\n      '3:プレイヤー名',\n      '3:使用キャラ',\n      '3:コメント',\n      '3:主な活動地域',\n      '3:主なプレイ環境',\n      '3:セイヴァー歴',\n      '3:打ち上げ',\n      '更新日時'\n    ];\n    var rows = [];\n    rows.push(rowHeader);\n    for (var i = 0, len = teams.length; i < len; i++) {\n      var team = teams[i];\n      var columns = [];\n      columns.push(team.name || '');\n      columns.push(team.matching || '');\n      team.members.forEach(member => {\n        columns.push(member.name || '');\n        let chara = charas[member.character];\n        if (!chara) {\n          chara = {\n            name: ''\n          };\n        }\n        columns.push(chara.name);\n        columns.push(member.comment || '');\n        columns.push(REGIONS[parseInt(member.region, 10) - 1] || '');\n        columns.push(filterDefaultStr(member.env) || '');\n        columns.push(filterDefaultStr(member.history) || '');\n        columns.push(member.after || '');\n      });\n      columns.push(getDateString(team.updatedAt));\n      rows.push(columns);\n    }\n\n    // parse\n    var lines = [];\n    for (var i = 0, len = rows.length; i < len; i++) {\n      lines.push('\"' + rows[i].join('\",\"') + '\"');\n    }\n    return lines.join('\\n');\n  }\n  function createSinglesData() {\n    var rowHeader = [\n      'プレイヤー名',\n      '斡旋希望',\n      '使用キャラ',\n      'コメント',\n      '主な活動地域',\n      '主なプレイ環境',\n      'セイヴァー歴',\n      '打ち上げ'\n    ];\n    var rows = [];\n    rows.push(rowHeader);\n    for (var i = 0, len = singles.length; i < len; i++) {\n      var single = singles[i];\n      var columns = [];\n      single.members.forEach(member => {\n        columns.push(member.name || '');\n        columns.push(single.matching || '');\n        let chara = charas[member.character];\n        if (!chara) {\n          chara = {\n            name: ''\n          };\n        }\n        columns.push(chara.name);\n        columns.push(member.comment || '');\n        columns.push(REGIONS[parseInt(member.region, 10) - 1] || '');\n        columns.push(filterDefaultStr(member.env) || '');\n        columns.push(filterDefaultStr(member.history) || '');\n        columns.push(member.after || '');\n      });\n      columns.push(getDateString(single.updatedAt));\n      rows.push(columns);\n    }\n\n    // parse\n    var lines = [];\n    for (var i = 0, len = rows.length; i < len; i++) {\n      lines.push('\"' + rows[i].join('\",\"') + '\"');\n    }\n    return lines.join('\\n');\n  }\n  function filterDefaultStr(str) {\n    if ('選択してください' === str) {\n      return '';\n    } else {\n      return str;\n    }\n  }\n\n  // login\n  $('#login-button').on('click', function(e) {\n    e.preventDefault();\n    if ( config.adminPass === md5($('#admin-pass').val())) {\n      $('.login').hide();\n      $('.page').show();\n    } else {\n      $('.login-message').addClass('alert-danger').text('パスワードが違います').show();\n    }\n  });\n\n  analytics();\n});"],"file":"admin.js"}