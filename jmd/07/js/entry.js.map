{"version":3,"sources":["entry.js"],"names":["$","REGIONS","ENV","arcade","ps3","xbox","CHARACTERS","id","name","image","charas","i","len","length","chara","count","optionsHTML","character","$options","each","select","append","clone","regionOptionsHTML","region","$regionOptions","on","prop","changeForm","lastModifyEntryKey","database","firebase","ref","teamsRef","child","singlesRef","entries","configRef","config","once","snapshot","val","open","adminPass","set","configUpdated","show","hide","teamNo","teams","team","key","no","tmpl","toTemplateFormat","fadeIn","prependTo","addOption","push","teamUpdated","singles","single","members","singleUpdated","remove","removeOption","splice","old","replaceWith","changeOptionLabel","e","preventDefault","collapse","enableActionButtons","hideMessages","isMediation","validate","data","getFormData","dataRef","onComplete","trigger","showMessage","setTimeout","modal","showMessage2","password","md5","entry","setFormData","text","removeClass","pass","comfirmDelete","href","replace","scrollTo","type","enabled","isEdit","num","updatedAt","Date","toString","twitter","comment","env","history","after","matching","console","log","selector","label","value","reverse","prepend","find","option","message","fadeOut","empty","className","addClass","handle","div","span","button","cancel","adjust","animate","scrollTop","eq","offset","top","document","hasClass","focus","style","cssText","reset","urlReplace","attr","pushState","location","hash","back","updateTotalCount","getDateString","analytics","upCountTask","totalCount","forEach","member","clearTimeout","afterCount","click","clearFormPlayer","selectedIndex","task","pCharas","extend","pCharasArray","sortByCount","objectToArray","displayCharaCount","regionCount","parseInt","regionData","undefined","sort","a","b","appendTo","object","array","selecter","totalSelecter","date","getFullYear","padLeft","getMonth","getDate","getHours","getMinutes","getSeconds","str","pad","buf","slice","charaBlank","charaName","charaIcon"],"mappings":"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","sourcesContent":["$(function(){\n  var REGIONS = ['北海道','青森県','岩手県','宮城県','秋田県',\n  '山形県','福島県','茨城県','栃木県','群馬県','埼玉県','千葉県',\n  '東京都','神奈川県','新潟県','富山県','石川県','福井県','山梨県',\n  '長野県','岐阜県','静岡県','愛知県','三重県','滋賀県','京都府',\n  '大阪府','兵庫県','奈良県','和歌山県','鳥取県','島根県','岡山県',\n  '広島県','山口県','徳島県','香川県','愛媛県','高知県','福岡県',\n  '佐賀県','長崎県','熊本県','大分県','宮崎県','鹿児島県','沖縄県'\n  ];\n  var ENV = {\n    arcade: 'アーケード',\n    ps3: 'PS3',\n    xbox: 'Xbox'\n  }\n\n  var CHARACTERS = [\n    {\n      id: 'anakaris',\n      name: 'アナカリス',\n      image: 'img_s_anakaris_50x50.jpg'\n    }, {\n      id: 'aulbath',\n      name: 'オルバス',\n      image: 'img_s_aulbath_50x50.jpg'\n    }, {\n      id: 'bishamon',\n      name: 'ビシャモン',\n      image: 'img_s_bishamon_50x50.jpg'\n    }, {\n      id: 'bulleta',\n      name: 'バレッタ',\n      image: 'img_s_bulleta_50x50.jpg'\n    }, {\n      id: 'demitri',\n      name: 'デミトリ',\n      image: 'img_s_demitri_50x50.jpg'\n    }, {\n      id: 'felicia',\n      name: 'フェリシア',\n      image: 'img_s_felicia_50x50.jpg'\n    }, {\n      id: 'gallon',\n      name: 'ガロン',\n      image: 'img_s_gallon_50x50.jpg'\n    }, {\n      id: 'jedah',\n      name: 'ジェダ',\n      image: 'img_s_jedah_50x50.jpg'\n    }, {\n      id: 'leilei',\n      name: 'レイレイ',\n      image: 'img_s_leilei_50x50.jpg'\n    }, {\n      id: 'lilith',\n      name: 'リリス',\n      image: 'img_s_lilith_50x50.jpg'\n    }, {\n      id: 'morrigan',\n      name: 'モリガン',\n      image: 'img_s_morrigan_50x50.jpg'\n    }, {\n      id: 'qbee',\n      name: 'キュービー',\n      image: 'img_s_qbee_50x50.jpg'\n    }, {\n      id: 'sasquatch',\n      name: 'サスカッチ',\n      image: 'img_s_sasquatch_50x50.jpg'\n    }, {\n      id: 'victor',\n      name: 'ビクトル',\n      image: 'img_s_victor_50x50.jpg'\n    }, {\n      id: 'zabel',\n      name: 'ザベル',\n      image: 'img_s_zabel_50x50.jpg'\n    }\n  ];\n\n  // ハッシュ作成\n  var charas = {}\n  for (var i = 0, len = CHARACTERS.length; i < len; i++) {\n    var chara = CHARACTERS[i];\n    charas[chara.id] = {\n      name: chara.name,\n      image: chara.image,\n      count: 0\n    };\n  }\n\n  // 使用キャラ選択の作成\n  var optionsHTML = '';\n  for (var i = 0, len = CHARACTERS.length; i < len; i++) {\n    var character = CHARACTERS[i];\n    optionsHTML +=\n      '<option value=\"' + character.id + '\">' + character.name + '</option>';\n  }\n  var $options = $(optionsHTML);\n  $('select.characters').each(function(i, select) {\n    $(select).append($options.clone());\n  });\n\n  // 都道府県選択の作成\n  var regionOptionsHTML = '';\n  for (var i = 0, len = REGIONS.length; i < len; i++) {\n    var region = REGIONS[i];\n    regionOptionsHTML +=\n      '<option value=\"' + (i+1) + '\">' + region + '</option>';\n  }\n  var $regionOptions = $(regionOptionsHTML);\n  $('select.regions').each(function(i, select) {\n    $(select).append($regionOptions.clone());\n  });\n\n  // フォーム切替\n  $('input[name=entry-type]').on('change', function() {\n    if ($('#type-single').prop('checked')) {\n      changeForm('single');\n    } else {\n      changeForm('team');\n    }\n  });\n\n  var lastModifyEntryKey = '';\n\n  // firebase\n  var database = firebase.database();\n  var ref = database.ref('06/data');\n  var teamsRef = ref.child('teams');\n  var singlesRef = ref.child('singles');\n  var entries = {};\n\n  // 設定\n  var configRef = ref.child('config');\n  var config;\n  configRef.child('open');\n  configRef.once('value', function(snapshot) {\n    config = snapshot.val();\n    if (!config) {\n      config = {\n        open: true,\n        adminPass: 'e421b0ade1927b91fa41bfa2baf72eb5'\n      }\n      configRef.set(config);\n    }\n    configUpdated(config);\n    configRef.on('value', function(snapshot) {\n      config = snapshot.val();\n      configUpdated(config);\n    });\n  });\n\n  function configUpdated(config) {\n    if (config.open) {\n      $('.entry-action').show();\n    } else {\n      $('.entry-action').hide();\n    }\n  }\n\n  // 追加\n  var teamNo = 0;\n  var teams = [];\n  teamsRef.on('child_added', function(snapshot) {\n    var team = snapshot.val();\n    var key = snapshot.key;\n    team.no = ++teamNo;\n    team.key = key;\n    $('#template-team').tmpl(toTemplateFormat(team, 3)).fadeIn(1000).prependTo('#teams');\n\n    entries[key] = team;\n    addOption('#target-team', team.name, key, true);\n    teams.push(team);\n    teamUpdated(team);\n  });\n  var singles = [];\n  singlesRef.on('child_added', function(snapshot) {\n    var single = snapshot.val();\n    var key = snapshot.key;\n    single.key = key;\n    $('#template-single').tmpl(toTemplateFormat(single, 1)).fadeIn(1000).prependTo('#singles');\n    entries[key] = single;\n    addOption('#target-single', single.members[0].name, key, true);\n    singles.push(single);\n    singleUpdated(single);\n  });\n\n  // 削除\n  teamsRef.on('child_removed', function(snapshot) {\n    var key = snapshot.key;\n    $('#' + key).remove();\n    removeOption('#target-team', key);\n    delete entries[key];\n    for (var i = 0, len = teams.length; i < len; i++) {\n      if (teams[i].key === key) {\n        teams.splice(i, 1);\n        break;\n      }\n    }\n    teamUpdated();\n  });\n  singlesRef.on('child_removed', function(snapshot) {\n    var key = snapshot.key;\n    $('#' + key).remove();\n    removeOption('#target-single', key);\n    delete entries[key];\n    for (var i = 0, len = singles.length; i < len; i++) {\n      if (singles[i].key === key) {\n        singles.splice(i, 1);\n        break;\n      }\n    }\n    singleUpdated();\n  });\n\n  // 変更\n  teamsRef.on('child_changed', function(snapshot, old) {\n    var team = snapshot.val();\n    var key = snapshot.key;\n    team.no = entries[key].no;\n    team.key = key;\n\n    $('#' + key).replaceWith($('#template-team').tmpl(toTemplateFormat(team, 3)).fadeIn(1000));\n\n    entries[key] = team;\n    changeOptionLabel('#target-team', team.name, key);\n    for (var i = 0, len = teams.length; i < len; i++) {\n      if (teams[i].key === key) {\n        teams[i] = team;\n        break;\n      }\n    }\n    teamUpdated(team);\n  });\n  singlesRef.on('child_changed', function(snapshot, old) {\n    var single = snapshot.val();\n    var key = snapshot.key;\n    single.key = key;\n    $('#' + key).replaceWith($('#template-single').tmpl(toTemplateFormat(single, 1)).fadeIn(1000));\n    entries[key] = single;\n    changeOptionLabel('#target-single', single.members[0].name, key);\n    for (var i = 0, len = singles.length; i < len; i++) {\n      if (singles[i].key === key) {\n        singles[i] = single;\n        break;\n      }\n    }\n    singleUpdated(single);\n  });\n\n\n  // エントリー（保存）\n  $('#entry-button').on('click', function(e) {\n    e.preventDefault();\n    $('#edit-form').collapse('hide');\n    enableActionButtons(false);\n    hideMessages();\n\n    // validate\n    var isMediation = $('#type-single').prop('checked');\n    if (!validate(isMediation)) {\n      enableActionButtons(true);\n      return false;\n    }\n    var data = getFormData();\n    var dataRef;\n    if (isMediation) {\n      dataRef = singlesRef.push(data, onComplete);\n    } else {\n      dataRef = teamsRef.push(data, onComplete);\n    }\n\n    function onComplete() {\n      $('#type-team').trigger('change');\n      showMessage('success', 'エントリーが完了しました', true);\n      $('.team-entry-form > .form-group').hide();\n      setTimeout(function(){\n        $('#team-entry').modal('hide');\n      }, 1500);\n      lastModifyEntryKey = dataRef.key;\n    }\n  });\n\n  // 編集・削除の入力\n  $('#input-button').on('click', function(e){\n    e.preventDefault();\n    hideMessages();\n\n    if ($('#target').prop('selectedIndex') === 0) {\n      showMessage2('danger', '対象のエントリーを選択してください');\n      return false;\n    }\n    if ($('#input-pass').val().length === 0) {\n      showMessage2('danger', 'パスワードを入力してください');\n      return false;\n    }\n\n    var key = $('#target').val();\n    var password = md5($('#input-pass').val());\n    var entry = entries[key];\n    if (entry.password === password || config.adminPass === password) {\n      // エントリー情報セット\n      setFormData(entry, key);\n      $('#message').hide();\n      $('#entry-button').hide();\n      $('#edit-button').show();\n      $('#delete-button').show();\n      $('#entry-form-title').text('エントリーの編集・削除');\n      $('.entry-explain').hide();\n      $('.pass .badge').hide();\n      $('#pass').removeClass('require').prop('placeholder', 'パスワードを変更する');\n      $('#team-entry').removeClass('edit');\n      hideMessages();\n    } else {\n      showMessage2('danger', 'パスワードが違います');\n      return false;\n    }\n  });\n\n  // 編集する\n  $('#edit-button').on('click', function(e) {\n    e.preventDefault();\n\n    enableActionButtons(false);\n    hideMessages();\n\n    // validate\n    var key = $('#key').val();\n    if (key.length === 0) {\n      showMessage('danger', 'エラーが発生しました。もう一度最初からやり直してください');\n      enableActionButtons(true);\n      return false;\n    }\n    var isMediation = $('#type-single').prop('checked');\n    if (!validate(isMediation, true)) {\n      enableActionButtons(true);\n      return false;\n    }\n\n\n    var data = getFormData();\n    var dataRef;\n\n    // パスワードの入力がなければ旧パスワードのまま\n    var pass = $('#pass').val();\n    if (pass.length !== 0) {\n      data.password = md5(pass);\n    } else {\n      data.password = entries[key].password;\n    }\n    var dataRef;\n    if (!entries[key].name && !isMediation) {\n      // 斡旋からチームエントリー\n      dataRef = singlesRef.child(key);\n      dataRef.set(null);\n      dataRef = teamsRef.push(data, onComplete);\n    } else if (entries[key].name && isMediation) {\n      // チームエントリーから斡旋\n      dataRef = teamsRef.child(key);\n      dataRef.set(null);\n      dataRef = singlesRef.push(data, onComplete);\n    } else if (isMediation) {\n      // 斡旋から斡旋\n      dataRef = singlesRef.child(key);\n      dataRef.set(data, onComplete);\n    } else {\n      // チームエントリーからチームエントリー\n      dataRef = teamsRef.child(key);\n      dataRef.set(data, onComplete);\n    }\n    function onComplete() {\n      showMessage('success', '編集が完了しました', true);\n      $('.team-entry-form > .form-group').hide();\n      setTimeout(function(){\n        $('#team-entry').modal('hide');\n      }, 1500);\n      lastModifyEntryKey = dataRef.key;\n    }\n  });\n\n  // 削除する\n  $('#delete-button').on('click', function(e) {\n    e.preventDefault();\n\n    enableActionButtons(false);\n    // validate\n    var key = $('#key').val();\n    if (key.length === 0) {\n      showMessage('danger', 'エラーが発生しました。もう一度最初からやり直してください');\n      enableActionButtons(true);\n      return false;\n    }\n    comfirmDelete(function(e){\n      e.preventDefault();\n      var isMediation = $('#type-single').prop('checked');\n      var dataRef;\n      if (isMediation) {\n        dataRef = singlesRef.child(key);\n        dataRef.set(null, onComplete);\n      } else {\n        dataRef = teamsRef.child(key);\n        dataRef.set(null, onComplete);\n      }\n    });\n\n    function onComplete() {\n      showMessage('success', '削除が完了しました', true);\n      $('.team-entry-form > .form-group').hide();\n      setTimeout(function(){\n        $('#team-entry').modal('hide');\n      }, 1500);\n    }\n  });\n\n  // スムーズスクロール\n  $('.anchor-button').on('click', function(e) {\n    e.preventDefault();\n    var href = '#' + this.href.replace(/.*#/, '');\n    scrollTo(href, -70);\n  });\n\n  function hideMessages() {\n    $('#message').hide();\n    $('#message2').hide();\n  }\n\n  function changeForm(type) {\n    if (type === 'single') {\n      $('#member1').show();\n      $('#member1 > legend').hide();\n      $('#member2').hide();\n      $('#member3').hide();\n      $('#team-name').hide();\n      $('.pass').show();\n    } else {\n      $('#member1').show();\n      $('#member1 > legend').show();\n      $('#member2').show();\n      $('#member3').show();\n      $('#team-name').show();\n      $('.pass').show();\n    }\n  }\n\n  function enableActionButtons(enabled) {\n    $('#entry-button').prop('disabled', !enabled);\n    $('#edit-button').prop('disabled', !enabled);\n    $('#delete-button').prop('disabled', !enabled);\n    $('#cancel-button').prop('disabled', !enabled);\n  }\n\n  function validate(isMediation, isEdit) {\n    if (typeof isEdit == 'undefined') {\n      isEdit = false\n    }\n    if (!isMediation) {\n      if ($('#teamName').val().length === 0) {\n        showMessage('danger', 'チーム名を入力してください');\n        return false;\n      }\n    }\n    if ($('#member1-name').val().length === 0) {\n      showMessage('danger', '1人目のプレイヤー名を入力してください');\n      return false;\n    }\n    if ($('#member1-character').prop('selectedIndex') === 0) {\n      showMessage('danger', '1人目の使用キャラを選択してください');\n      return false;\n    }\n    if (!isMediation) {\n      for (let i = 1; i < 3; i++) {\n        let num = i + 1;\n          if ( $(`#member${num}-name`).val() ||\n            $(`#member${num}-character`).prop('selectedIndex') !== 0 ||\n            $(`#member${num}-comment`).val() ||\n            $(`#member${num}-region`).prop('selectedIndex') !== 0 ||\n            $(`#member${num}-env`).prop('selectedIndex') !== 0 ||\n            $(`#member${num}-history`).val() ||\n            $(`#member${num}-join-ok`).prop('checked') ||\n            $(`#member${num}-join-ng`).prop('checked')\n          ) {\n            if ($(`#member${num}-name`).val().length === 0) {\n              showMessage('danger', `${num}人目のプレイヤー名を入力してください`);\n              return false;\n            }\n            if ($(`#member${num}-character`).prop('selectedIndex') === 0) {\n              showMessage('danger', `${num}人目の使用キャラを選択してください`);\n              return false;\n            }\n          }\n      }\n    }\n    // if (!isMediation) {\n    //   if ($('#member2-name').val().length === 0) {\n    //     showMessage('danger', '2人目のプレイヤー名を入力してください');\n    //     return false;\n    //   }\n    //   if ($('#member2-character').prop('selectedIndex') === 0) {\n    //     showMessage('danger', '2人目の使用キャラを選択してください');\n    //     return false;\n    //   }\n    //   if ($('#member3-name').val().length === 0) {\n    //     showMessage('danger', '3人目のプレイヤー名を入力してください');\n    //     return false;\n    //   }\n    //   if ($('#member3-character').prop('selectedIndex') === 0) {\n    //     showMessage('danger', '3人目の使用キャラを選択してください');\n    //     return false;\n    //   }\n    // }\n    if (!isEdit && $('#pass').val().length === 0) {\n      showMessage('danger', '削除・編集用のパスワードを入力してください');\n      return false;\n    }\n    return true;\n  }\n\n  function getFormData() {\n    // must inputs\n    var data = {\n      updatedAt: new Date().toString(),\n      password: md5($('#pass').val()),\n      members: []\n    }\n\n    for (let i = 0; i < 3; i++) {\n      let num = i + 1;\n      if ($(`#member${num}-name`).val()) {\n        data.members.push({\n          name: $(`#member${num}-name`).val(),\n          character: $(`#member${num}-character`).val(),\n          twitter: $(`#member${num}-twitter`).val(),\n          comment: $(`#member${num}-comment`).val().replace(/[\\n\\r]/g, ''),\n          region: $(`#member${num}-region`).val(),\n          env: $(`#member${num}-env`).val() || '',\n          history: $(`#member${num}-history`).val() || '',\n          after: $(`input[name=member${num}-after]:checked`).val() || ''\n        });\n      }\n    }\n\n    if ($('#type-team').prop('checked')) {\n      // チーム名\n      data.name = $('#teamName').val();\n    }\n    data.matching = $(`input[name=matching]:checked`).val() || ''\n    return data;\n  }\n\n  function setFormData(entry, key) {\n    $('#key').val(key || '');\n\n    console.log('debug', entry);\n    for (let i = 0; i < entry.members.length; i++) {\n      let num = i + 1;\n      $(`#member${num}-name`).val(entry.members[i].name);\n      $(`#member${num}-character`).val(entry.members[i].character || '選択してください');\n      $(`#member${num}-twitter`).val(entry.members[i].twitter);\n      $(`#member${num}-comment`).val(entry.members[i].comment);\n      $(`#member${num}-region`).val(entry.members[i].region || '選択してください');\n      $(`#member${num}-env`).val(entry.members[i].env || '選択してください');\n      $(`#member${num}-history`).val(entry.members[i].history);\n      let after = entry.members[i].after;\n      if (after) {\n        if (after == 1) {\n          $(`#member${num}-join-ok`).prop('checked', true);\n        } else {\n          $(`#member${num}-join-ng`).prop('checked', true);\n        }\n      }\n    }\n\n    if (entry.name && entry.name.length !== 0) {\n      $('#type-team').prop('checked', true).trigger('change');\n      $('#teamName').val(entry.name);\n    } else {\n      $('#type-single').prop('checked', true).trigger('change');\n    }\n    let matching = entry.matching;\n    if (matching) {\n      if (matching == 1) {\n        $(`#matching-ok`).prop('checked', true);\n      } else {\n        $(`#matching-ng`).prop('checked', true);\n      }\n    }\n  }\n\n  function addOption(selector, label, value, reverse) {\n    if (reverse) {\n      $(selector).prepend($('<option/>').text(label).val(value));\n    } else {\n      $(selector).append($('<option/>').text(label).val(value));\n    }\n  }\n\n  function removeOption(selector, value) {\n    $(selector).find('option').each(function(i, option) {\n      if (option.value === value) {\n        $(option).remove();\n        return;\n      }\n    });\n  }\n  function changeOptionLabel(selector, label, value) {\n    $(selector).find('option').each(function(i, option) {\n      if (option.value === value) {\n        $(option).text(label);\n        return;\n      }\n    });\n  }\n\n  function showMessage(type, message, fadeOut) {\n    $('#message').empty();\n    // if (typeof fadeOut === 'undefined') {\n    //   fadeOut = false;\n    // }\n    $('#message')[0].className = '';\n    $('#message').text(message).addClass('alert alert-' + type).show();\n    // if (fadeOut) {\n    //   setTimeout(function(){\n    //     $('#message').fadeOut(1000);\n    //   }, 3000);\n    // }\n  }\n\n  function showMessage2(type, message, fadeOut) {\n    $('#message2').empty();\n    // if (typeof fadeOut === 'undefined') {\n    //   fadeOut = false;\n    // }\n    $('#message2')[0].className = '';\n    $('#message2').text(message).addClass('alert alert-' + type).show();\n    // if (fadeOut) {\n    //   setTimeout(function(){\n    //     $('#message2').fadeOut(1000);\n    //   }, 3000);\n    // }\n  }\n\n  function comfirmDelete(handle) {\n    $('#message').empty();\n    var div = $('<div/>');\n    var span = $('<span/>').text('エントリーを削除します。よろしいですか？');\n    var button = $('<a href=\"#\"/>').addClass('btn btn-danger btn-sm').text('はい').on('click', handle);\n    var cancel = $('<a href=\"#\"/>').addClass('btn btn-default btn-sm').text('いいえ').on('click', function(e){\n      e.preventDefault();\n      $('#message').hide();\n    });\n    div.append(span);\n    div.append(button);\n    div.append(cancel);\n    $('#message')[0].className = '';\n    $('#message').append(div).addClass('alert alert-danger').show();\n  }\n\n  function scrollTo(selector, adjust) {\n    $(\"html,body\").animate({scrollTop:$(selector).eq(0).offset().top + adjust});\n  }\n\n  $('.to-edit-form').on('click', function(e) {\n    e.preventDefault();\n    $('#team-entry').addClass('edit').modal();\n  });\n  $('.to-entry-form').on('click', function(e) {\n    e.preventDefault();\n    $('#team-entry').removeClass('edit').modal();\n  });\n  $(document).on('click', '.edit-link', function(e) {\n    e.preventDefault();\n    $('#target').val($(this).data('id'));\n    $('#team-entry').addClass('edit').modal();\n  });\n  $('#team-entry').on('shown.bs.modal', function (e) {\n    if ($('#team-entry').hasClass('edit')) {\n      if ($('#target').prop('selectedIndex') !== 0) {\n        $('#input-pass').focus();\n      } else {\n        $('#target').focus();\n      }\n    }\n  });\n  $('#team-entry').on('hidden.bs.modal', function(e) {\n    $('#entry-form-title').text('エントリー');\n    $('#entry-button')[0].style.cssText = '';\n    $('.entry-explain')[0].style.cssText = '';\n    $('#edit-button')[0].style.cssText = '';\n    $('#delete-button')[0].style.cssText = '';\n    $('.pass .badge')[0].style.cssText = '';\n    $('#pass').addClass('require').prop('placeholder', '');\n    $('.team-entry-form')[0].reset();\n    $('.team-entry-form > .form-group')[0].style.cssText = '';  // 種別\n    $('.team-entry-form > .form-group')[1].style.cssText = '';  // 斡旋希望\n    $('.edit-form')[0].reset();\n    changeForm();\n    enableActionButtons(true);\n    hideMessages();\n\n    if (lastModifyEntryKey) {\n      var selector = '#' + lastModifyEntryKey;\n      scrollTo(selector, -100);\n      $(selector).addClass('done');\n      setTimeout(function() {\n        $(selector).addClass('animate');\n      }, 100);\n      lastModifyEntryKey = '';\n    }\n  });\n  $('.change-edit-form').on('click', function(e) {\n    e.preventDefault();\n    $('#team-entry').addClass('edit');\n    hideMessages();\n  });\n\n  // modalが表示された時\n  $(\".modal\").on(\"shown.bs.modal\", function() {\n    var urlReplace = \"#\" + $(this).attr('id')\n    history.pushState(null, null, urlReplace)\n  });\n\n  // modalの閉じる機能が動作した時\n  $(\".modal\").on(\"hidden.bs.modal\", function () {\n    if(location.hash == \"#\" + $(this).attr('id')) {\n      history.back()\n    }\n  });\n\n  function teamUpdated(team) {\n    $('.team-entry-count').text(teams.length);\n    updateTotalCount();\n    if (team) {\n      if (team.updatedAt) {\n        $('.team-last-updated-at').text(getDateString(team.updatedAt));\n      }\n    } else {\n      $('.team-last-updated-at').text(getDateString());\n    }\n    analytics();\n  }\n  function singleUpdated(single) {\n    $('.single-entry-count').text(singles.length);\n    updateTotalCount();\n    if (single) {\n      if (single.updatedAt) {\n        $('.single-last-updated-at').text(getDateString(single.updatedAt));\n      }\n    } else {\n      $('.single-last-updated-at').text(getDateString());\n    }\n    analytics();\n  }\n  var upCountTask;\n  function updateTotalCount() {\n    let totalCount = 0;\n    teams.forEach(team => {\n      team.members.forEach(member => {\n        if (member.name) {\n          totalCount++;\n        }\n      });\n    });\n    singles.forEach(team => {\n      team.members.forEach(member => {\n        if (member.name) {\n          totalCount++;\n        }\n      });\n    });\n    $('.total-count').text(totalCount);\n\n    if (upCountTask) {\n      clearTimeout(upCountTask);\n    }\n    upCountTask = setTimeout(function() {\n      var afterCount = 0;\n      for (var key in entries) {\n        var entry = entries[key];\n        for (var i = 0, len = entry.members.length; i < len; i++) {\n          var member = entry.members[i];\n          if (member.after == 1) {\n            afterCount++;\n          }\n        }\n      }\n      $('.after-count').text(afterCount);\n    }, 1000);\n  }\n\n  $('#clear-btn-2').click(function(e) {\n    e.preventDefault();\n    clearFormPlayer(2);\n  });\n  $('#clear-btn-3').click(function(e) {\n    e.preventDefault();\n    clearFormPlayer(3);\n  })\n\n  function clearFormPlayer(num) {\n    if (!num) {\n      return;\n    }\n    $('#member' + num + '-name').val('');\n    $('#member' + num + '-character')[0].selectedIndex = 0;\n    $('#member' + num + '-comment').val('');\n    $('#member' + num + '-region')[0].selectedIndex = 0;\n    $('#member' + num + '-env')[0].selectedIndex = 0;\n    $('#member' + num + '-history').val('');\n    $('#member' + num + '-join-ok').prop('checked', false);\n    $('#member' + num + '-join-ng').prop('checked', false);\n  }\n\n  var task;\n  function analytics() {\n    if (task) {\n      clearTimeout(task);\n    }\n    task = setTimeout(function() {\n      var pCharas = $.extend(true, {}, charas);\n      for (var key in entries) {\n        var entry = entries[key];\n        for (var i = 0, len = entry.members.length; i < len; i++) {\n          if (pCharas[entry.members[i].character]) {\n            pCharas[entry.members[i].character].count++;\n          }\n        }\n      }\n      var pCharasArray = sortByCount(objectToArray(pCharas));\n      displayCharaCount(pCharasArray, '#character-count');\n\n      // 都道府県別集計\n      var regionCount = [];\n      for (var key in entries) {\n        var entry = entries[key];\n        for (var i = 0, len = entry.members.length; i < len; i++) {\n          if (entry.members[i].region !== '選択してください') {\n            var region = parseInt(entry.members[i].region, 10);\n            if (!regionCount[region]) {\n              regionCount[region] = 0;\n            }\n            regionCount[region]++;\n          }\n        }\n      }\n\n      var regionData = [];\n      for (var i = 0, len = regionCount.length; i < len; i++) {\n        if (regionCount[i] !== undefined) {\n          regionData.push({\n            name: REGIONS[i-1],\n            count: regionCount[i]\n          });\n        }\n      }\n      regionData.sort(function(a,b){\n        if(a.count < b.count) return 1;\n        if(a.count > b.count) return -1;\n        return 0;\n      });\n\n      $('#region-count').empty();\n      for (var i = 0, len = regionData.length; i < len; i++) {\n        $('#template-region-count').tmpl(regionData[i]).appendTo('#region-count');\n      }\n\n    }, 1000);\n  }\n  function objectToArray(object) {\n    var array = [];\n    for (var key in object) {\n      array.push(object[key]);\n    }\n    return array;\n  }\n  function sortByCount(array) {\n    return array.sort(function(a,b){\n        if(a.count < b.count) return -1;\n        if(a.count > b.count) return 1;\n        return 0;\n    });\n  }\n  function displayCharaCount(array, selecter, totalSelecter) {\n    $(selecter).empty();\n    var totalCount = 0;\n    for (var i = (array.length-1); i >= 0; i--) {\n      var chara = array[i];\n      $('#character-count-template').tmpl(chara).appendTo(selecter);\n      totalCount += chara.count;\n    }\n    if (totalSelecter) {\n      $(totalSelecter).text(totalCount);\n    }\n  }\n\n  function getDateString(date) {\n    if (date === undefined) {\n      date = new Date();\n    } else if (typeof date === 'string' && date.length !== 0) {\n      date = new Date(date);\n    }\n    if (date) {\n      return date.getFullYear() + '/' +\n             padLeft(date.getMonth() + 1) + '/' +\n             padLeft(date.getDate()) + ' ' +\n             padLeft(date.getHours()) + ':' +\n             padLeft(date.getMinutes()) + ':' +\n             padLeft(date.getSeconds());\n    } else {\n      return '';\n    }\n  }\n  function padLeft(str, len, pad) {\n    if (pad === undefined) {\n      pad = '0';\n    }\n    if (len === undefined) {\n      len = 2;\n    }\n    var buf = ''\n    for (var i = 0; i < len; i++) {\n      buf += pad;\n    }\n    str = pad + str;\n    return str.slice(-len);\n  }\n\n  const charaBlank = {\n    name: '',\n    image: 'blank.png'\n  };\n\n  function toTemplateFormat(data, len) {\n    if (!len) {\n      len = 3;\n    }\n    for (let i = 0; i < len; i++) {\n      let member = data.members[i];\n      if (!member) {\n        member = {};\n      }\n      member.name = member.name || '';\n      member.comment = member.comment || '';\n      let character = charas[member.character];\n      if (!character) {\n        character = charaBlank;\n      }\n      member.charaName = character.name;\n      member.charaIcon = character.image;\n      data.members[i] = member;\n    }\n    return data;\n  }\n\n  analytics();\n});\n\nconsole.log('%c　　　　　　　　　　　　　　　　＼　│　／', 'font-family: ＭＳ Ｐゴシック');\nconsole.log('%c　　　　　　　　　　　　　　　　　／￣＼　　 ／￣￣￣￣￣￣￣￣￣', 'font-family: ＭＳ Ｐゴシック');\nconsole.log('%c　　　　　　　　　　　　　　　─（ ﾟ ∀ ﾟ ）＜　さいたまさいたま！', 'font-family: ＭＳ Ｐゴシック');\nconsole.log('%c　　　　　　　　　　　　　　　　　＼＿／　　 ＼＿＿＿＿＿＿＿＿＿', 'font-family: ＭＳ Ｐゴシック');\nconsole.log('%c　　　　　　　　　　　　　　　　／　│　＼', 'font-family: ＭＳ Ｐゴシック');\nconsole.log('%c　　　　　　　　　　　　　　　　　　　 ∩ ∧　∧　　／￣￣￣￣￣￣￣￣￣￣', 'font-family: ＭＳ Ｐゴシック');\nconsole.log('%c￣￣￣￣￣￣￣￣＼　　∩ ∧　∧　　　　＼（ ﾟ∀ﾟ）＜　さいたまさいたまさいたま！', 'font-family: ＭＳ Ｐゴシック');\nconsole.log('%cさいたま～～～！ 　 ＞（ ﾟ∀ﾟ ）/ 　　　｜　　　/ 　＼＿＿＿＿＿＿＿＿＿＿', 'font-family: ＭＳ Ｐゴシック');\nconsole.log('%c＿＿＿＿＿＿＿＿／ 　｜　　 〈　　　　｜　　｜　', 'font-family: ＭＳ Ｐゴシック');\nconsole.log('%c　　　　　　　　　　 /　／＼_」　　　/　／＼」', 'font-family: ＭＳ Ｐゴシック');\nconsole.log('%c　　　　　　　　　　 ￣　　　　　　 / ／', 'font-family: ＭＳ Ｐゴシック');\nconsole.log('バグを見つけたら @yoshikawa_t まで');\n"],"file":"entry.js"}