{"version":3,"file":"admin.js","names":["$","REGIONS","CHARACTERS","id","name","image","charas","i","len","length","chara","database","firebase","ref","teamsRef","child","singlesRef","configRef","config","once","snapshot","val","open","adminPass","set","configUpdated","on","show","removeClass","addClass","text","hide","e","preventDefault","teams","team","key","push","teamUpdated","singles","single","singleUpdated","splice","old","updatedAt","getDateString","analytics","date","undefined","Date","getFullYear","padLeft","getMonth","getDate","getHours","getMinutes","getSeconds","str","pad","buf","slice","task","clearTimeout","setTimeout","totalCount","afterCount","forEach","members","member","after","objectToArray","object","array","BOM","prop","encodeURIComponent","createTeamsData","EscapeSJIS","createSinglesData","rowHeader","rows","columns","matching","character","comment","parseInt","region","filterDefaultStr","env","history","lines","join","md5"],"sources":["admin.js"],"sourcesContent":["$(function(){\n\n  var REGIONS = ['北海道','青森県','岩手県','宮城県','秋田県',\n  '山形県','福島県','茨城県','栃木県','群馬県','埼玉県','千葉県',\n  '東京都','神奈川県','新潟県','富山県','石川県','福井県','山梨県',\n  '長野県','岐阜県','静岡県','愛知県','三重県','滋賀県','京都府',\n  '大阪府','兵庫県','奈良県','和歌山県','鳥取県','島根県','岡山県',\n  '広島県','山口県','徳島県','香川県','愛媛県','高知県','福岡県',\n  '佐賀県','長崎県','熊本県','大分県','宮崎県','鹿児島県','沖縄県'\n  ];\n\n  var CHARACTERS = [\n    {\n      id: 'anakaris',\n      name: 'アナカリス',\n      image: 'img_s_anakaris_50x50.jpg'\n    }, {\n      id: 'aulbath',\n      name: 'オルバス',\n      image: 'img_s_aulbath_50x50.jpg'\n    }, {\n      id: 'bishamon',\n      name: 'ビシャモン',\n      image: 'img_s_bishamon_50x50.jpg'\n    }, {\n      id: 'bulleta',\n      name: 'バレッタ',\n      image: 'img_s_bulleta_50x50.jpg'\n    }, {\n      id: 'demitri',\n      name: 'デミトリ',\n      image: 'img_s_demitri_50x50.jpg'\n    }, {\n      id: 'felicia',\n      name: 'フェリシア',\n      image: 'img_s_felicia_50x50.jpg'\n    }, {\n      id: 'gallon',\n      name: 'ガロン',\n      image: 'img_s_gallon_50x50.jpg'\n    }, {\n      id: 'jedah',\n      name: 'ジェダ',\n      image: 'img_s_jedah_50x50.jpg'\n    }, {\n      id: 'leilei',\n      name: 'レイレイ',\n      image: 'img_s_leilei_50x50.jpg'\n    }, {\n      id: 'lilith',\n      name: 'リリス',\n      image: 'img_s_lilith_50x50.jpg'\n    }, {\n      id: 'morrigan',\n      name: 'モリガン',\n      image: 'img_s_morrigan_50x50.jpg'\n    }, {\n      id: 'qbee',\n      name: 'キュービー',\n      image: 'img_s_qbee_50x50.jpg'\n    }, {\n      id: 'sasquatch',\n      name: 'サスカッチ',\n      image: 'img_s_sasquatch_50x50.jpg'\n    }, {\n      id: 'victor',\n      name: 'ビクトル',\n      image: 'img_s_victor_50x50.jpg'\n    }, {\n      id: 'zabel',\n      name: 'ザベル',\n      image: 'img_s_zabel_50x50.jpg'\n    }\n  ];\n\n  // ハッシュ作成\n  var charas = {}\n  for (var i = 0, len = CHARACTERS.length; i < len; i++) {\n    var chara = CHARACTERS[i];\n    charas[chara.id] = {\n      name: chara.name,\n      image: chara.image\n    };\n  }\n\n  // firebase\n  var database = firebase.database();\n  var ref = database.ref('08/data');\n  var teamsRef = ref.child('teams');\n  var singlesRef = ref.child('singles');\n\n  // 設定\n  var configRef = ref.child('config');\n  var config;\n  configRef.child('open');\n  configRef.once('value', function(snapshot) {\n    config = snapshot.val();\n    if (!config) {\n      config = {\n        open: true,\n        adminPass: 'e421b0ade1927b91fa41bfa2baf72eb5'\n      }\n      configRef.set(config);\n    }\n    configUpdated(config);\n    configRef.on('value', function(snapshot) {\n      config = snapshot.val();\n      configUpdated(config);\n    });\n  });\n\n  function configUpdated(config) {\n    $('.status').show();\n    if (config.open) {\n      $('.status').removeClass('alert-warning').addClass('alert-success');\n      $('.status-text').text('只今エントリー受付中');\n      $('.start').hide();\n      $('.stop').show();\n    } else {\n      $('.status').removeClass('alert-success').addClass('alert-warning');\n      $('.status-text').text('エントリー受付停止中');\n      $('.start').show();\n      $('.stop').hide();\n    }\n  }\n\n  $('.start').on('click', function(e) {\n    e.preventDefault();\n    config.open = true;\n    configRef.set(config);\n  });\n  $('.stop').on('click', function(e) {\n    e.preventDefault();\n    config.open = false;\n    configRef.set(config);\n  });\n\n\n\n  // 追加\n  var teams = [];\n  teamsRef.on('child_added', function(snapshot) {\n    var team = snapshot.val();\n    var key = snapshot.key;\n    team.key = key;\n    teams.push(team);\n    teamUpdated(team);\n  });\n  var singles = [];\n  singlesRef.on('child_added', function(snapshot) {\n    var single = snapshot.val();\n    var key = snapshot.key;\n    single.key = key;\n    singles.push(single);\n    singleUpdated(single);\n  });\n\n  // 削除\n  teamsRef.on('child_removed', function(snapshot) {\n    var key = snapshot.key;\n    for (var i = 0, len = teams.length; i < len; i++) {\n      if (teams[i].key === key) {\n        teams.splice(i, 1);\n        break;\n      }\n    }\n    teamUpdated();\n  });\n  singlesRef.on('child_removed', function(snapshot) {\n    var key = snapshot.key;\n    for (var i = 0, len = singles.length; i < len; i++) {\n      if (singles[i].key === key) {\n        singles.splice(i, 1);\n        break;\n      }\n    }\n    singleUpdated();\n  });\n\n  // 変更\n  teamsRef.on('child_changed', function(snapshot, old) {\n    var team = snapshot.val();\n    var key = snapshot.key;\n    team.key = key;\n    for (var i = 0, len = teams.length; i < len; i++) {\n      if (teams[i].key === key) {\n        teams[i] = team;\n        break;\n      }\n    }\n    teamUpdated(team);\n  });\n  singlesRef.on('child_changed', function(snapshot, old) {\n    var single = snapshot.val();\n    var key = snapshot.key;\n    single.key = key;\n    for (var i = 0, len = singles.length; i < len; i++) {\n      if (singles[i].key === key) {\n        singles[i] = single;\n        break;\n      }\n    }\n    singleUpdated(single);\n  });\n\n  function teamUpdated(team) {\n    $('.team-entry-count').text(teams.length);\n    if (team) {\n      if (team.updatedAt) {\n        $('.team-last-updated-at').text(getDateString(team.updatedAt));\n      }\n    } else {\n      $('.team-last-updated-at').text(getDateString());\n    }\n    analytics();\n  }\n  function singleUpdated(single) {\n    $('.single-entry-count').text(singles.length);\n    if (single) {\n      if (single.updatedAt) {\n        $('.single-last-updated-at').text(getDateString(single.updatedAt));\n      }\n    } else {\n      $('.single-last-updated-at').text(getDateString());\n    }\n    analytics();\n  }\n\n  function getDateString(date) {\n    if (date === undefined) {\n      date = new Date();\n    } else if (typeof date === 'string' && date.length !== 0) {\n      date = new Date(date);\n    }\n    if (date) {\n      return date.getFullYear() + '/' +\n             padLeft(date.getMonth() + 1) + '/' +\n             padLeft(date.getDate()) + ' ' +\n             padLeft(date.getHours()) + ':' +\n             padLeft(date.getMinutes()) + ':' +\n             padLeft(date.getSeconds());\n    } else {\n      return '';\n    }\n  }\n  function padLeft(str, len, pad) {\n    if (pad === undefined) {\n      pad = '0';\n    }\n    if (len === undefined) {\n      len = 2;\n    }\n    var buf = ''\n    for (var i = 0; i < len; i++) {\n      buf += pad;\n    }\n    str = pad + str;\n    return str.slice(-len);\n  }\n\n  var task;\n  function analytics() {\n    if (task) {\n      clearTimeout(task);\n    }\n    task = setTimeout(function() {\n\n      // 総参加者カウント\n      let totalCount = 0;\n      var afterCount = 0;\n      teams.forEach(team => {\n        team.members.forEach(member => {\n          if (member.name) {\n            totalCount++;\n            if (member.after == 1) {\n              afterCount++;\n            }\n          }\n        });\n      });\n      singles.forEach(team => {\n        team.members.forEach(member => {\n          if (member.name) {\n            totalCount++;\n            if (member.after == 1) {\n              afterCount++;\n            }\n          }\n        });\n      });\n      $('.total-count').text(totalCount);\n      $('.after-count').text(afterCount);\n\n    }, 1000);\n  }\n  function objectToArray(object) {\n    var array = [];\n    for (var key in object) {\n      array.push(object[key]);\n    }\n    return array;\n  }\n\n  var BOM = '\\ufeff';\n  $('#teams-output-utf8').on('click', function(e) {\n    $(this).prop('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(BOM + createTeamsData()));\n  });\n  $('#teams-output-sjis').on('click', function(e) {\n    $(this).prop('href', 'data:text/plain;charset=sjis,' + EscapeSJIS(createTeamsData()));\n  });\n  $('#singles-output-utf8').on('click', function(e) {\n    $(this).prop('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(BOM + createSinglesData()));\n  });\n  $('#singles-output-sjis').on('click', function(e) {\n    $(this).prop('href', 'data:text/plain;charset=sjis,' + EscapeSJIS(createSinglesData()));\n  });\n\n  function createTeamsData() {\n    var rowHeader = [\n      'チーム名',\n      '斡旋希望',\n      '1:プレイヤー名',\n      '1:使用キャラ',\n      '1:コメント',\n      '1:主な活動地域',\n      '1:主なプレイ環境',\n      '1:セイヴァー歴',\n      '1:打ち上げ',\n      '2:プレイヤー名',\n      '2:使用キャラ',\n      '2:コメント',\n      '2:主な活動地域',\n      '2:主なプレイ環境',\n      '2:セイヴァー歴',\n      '2:打ち上げ',\n      '3:プレイヤー名',\n      '3:使用キャラ',\n      '3:コメント',\n      '3:主な活動地域',\n      '3:主なプレイ環境',\n      '3:セイヴァー歴',\n      '3:打ち上げ',\n      '更新日時'\n    ];\n    var rows = [];\n    rows.push(rowHeader);\n    for (var i = 0, len = teams.length; i < len; i++) {\n      var team = teams[i];\n      var columns = [];\n      columns.push(team.name || '');\n      columns.push(team.matching || '');\n      team.members.forEach(member => {\n        columns.push(member.name || '');\n        let chara = charas[member.character];\n        if (!chara) {\n          chara = {\n            name: ''\n          };\n        }\n        columns.push(chara.name);\n        columns.push(member.comment || '');\n        columns.push(REGIONS[parseInt(member.region, 10) - 1] || '');\n        columns.push(filterDefaultStr(member.env) || '');\n        columns.push(filterDefaultStr(member.history) || '');\n        columns.push(member.after || '');\n      });\n      columns.push(getDateString(team.updatedAt));\n      rows.push(columns);\n    }\n\n    // parse\n    var lines = [];\n    for (var i = 0, len = rows.length; i < len; i++) {\n      lines.push('\"' + rows[i].join('\",\"') + '\"');\n    }\n    return lines.join('\\n');\n  }\n  function createSinglesData() {\n    var rowHeader = [\n      'プレイヤー名',\n      '斡旋希望',\n      '使用キャラ',\n      'コメント',\n      '主な活動地域',\n      '主なプレイ環境',\n      'セイヴァー歴',\n      '打ち上げ'\n    ];\n    var rows = [];\n    rows.push(rowHeader);\n    for (var i = 0, len = singles.length; i < len; i++) {\n      var single = singles[i];\n      var columns = [];\n      single.members.forEach(member => {\n        columns.push(member.name || '');\n        columns.push(single.matching || '');\n        let chara = charas[member.character];\n        if (!chara) {\n          chara = {\n            name: ''\n          };\n        }\n        columns.push(chara.name);\n        columns.push(member.comment || '');\n        columns.push(REGIONS[parseInt(member.region, 10) - 1] || '');\n        columns.push(filterDefaultStr(member.env) || '');\n        columns.push(filterDefaultStr(member.history) || '');\n        columns.push(member.after || '');\n      });\n      columns.push(getDateString(single.updatedAt));\n      rows.push(columns);\n    }\n\n    // parse\n    var lines = [];\n    for (var i = 0, len = rows.length; i < len; i++) {\n      lines.push('\"' + rows[i].join('\",\"') + '\"');\n    }\n    return lines.join('\\n');\n  }\n  function filterDefaultStr(str) {\n    if ('選択してください' === str) {\n      return '';\n    } else {\n      return str;\n    }\n  }\n\n  // login\n  $('#login-button').on('click', function(e) {\n    e.preventDefault();\n    if ( config.adminPass === md5($('#admin-pass').val())) {\n      $('.login').hide();\n      $('.page').show();\n    } else {\n      $('.login-message').addClass('alert-danger').text('パスワードが違います').show();\n    }\n  });\n\n  analytics();\n});"],"mappings":"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","ignoreList":[]}